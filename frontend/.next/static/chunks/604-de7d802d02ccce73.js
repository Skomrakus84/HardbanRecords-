"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{2604:(a,e,s)=>{s.d(e,{C:()=>u});let t=a=>{let e,s=new Set,t=(a,t)=>{let n="function"==typeof a?a(e):a;if(!Object.is(n,e)){let a=e;e=(null!=t?t:"object"!=typeof n||null===n)?n:Object.assign({},e,n),s.forEach(s=>s(e,a))}},n=()=>e,i={setState:t,getState:n,getInitialState:()=>o,subscribe:a=>(s.add(a),()=>s.delete(a)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},o=e=a(t,n,i);return i};var n=s(4232),i=s(5712);let{useDebugValue:o}=n,{useSyncExternalStoreWithSelector:r}=i,l=!1,d=a=>{"function"!=typeof a&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let e="function"==typeof a?(a=>a?t(a):t)(a):a,s=(a,s)=>(function(a,e=a=>a,s){s&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);let t=r(a.subscribe,a.getState,a.getServerState||a.getInitialState,e,s);return o(t),t})(e,a,s);return Object.assign(s,e),s},u=(a=>a?d(a):d)((a,e)=>({isInitialized:!1,isLoading:!1,error:null,view:"DASHBOARD",loading:{metadata:!1,releaseDate:!1,forecast:!1,syncMatch:!1,coverArt:!1,aandrScout:!1,funding:!1,collabFinder:!1,listenerAnalytics:!1,splitAgreement:!1,proofread:!1,plotAnalysis:!1,enrichment:!1,illustration:!1,blurb:!1,keywords:!1,salesForecast:!1,marketTrends:!1,marketingAssets:!1,worldConsistency:!1,rightsMatch:!1,bookCover:!1},toasts:[],onboarding:{tourStepIndex:-1,onboardingComplete:!1,activeTabOverride:void 0},music:{releases:[],tasks:[]},publishing:{books:[],tasks:[]},clearError:()=>a({error:null}),fetchReleases:async()=>{a({isLoading:!0,error:null});try{let e=await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(a=>a.musicApi.getAll()),t=e.data.releases||e.data;a(a=>({music:{...a.music,releases:Array.isArray(t)?t:[]},isLoading:!1}))}catch(i){var t,n;let s="Błąd podczas pobierania wydań: "+((null==i||null==(n=i.response)||null==(t=n.data)?void 0:t.message)||i.message);a({error:s,isLoading:!1}),e().addToast(s,"error")}},deleteRelease:async t=>{a({isLoading:!0,error:null});try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(a=>a.musicApi.delete(t)),await e().fetchReleases(),e().addToast("Wydanie zostało usunięte.","success")}catch(t){var n,i;let s="Błąd podczas usuwania wydania: "+((null==t||null==(i=t.response)||null==(n=i.data)?void 0:n.message)||t.message);throw a({error:s,isLoading:!1}),e().addToast(s,"error"),t}},initializeApp:async()=>{await Promise.all([e().fetchReleases(),e().fetchMusicTasks(),e().fetchBooks(),e().fetchPublishingTasks()]),a({isInitialized:!0})},setView:e=>a({view:e}),setLoading:(e,s)=>a(a=>({loading:{...a.loading,[e]:s}})),addToast:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";return a(a=>({toasts:[...a.toasts,{id:Date.now(),message:e,type:s}]}))},dismissToast:e=>a(a=>({toasts:a.toasts.filter(a=>a.id!==e)})),startTour:()=>{e().onboarding.onboardingComplete||a(a=>({onboarding:{...a.onboarding,tourStepIndex:0}}))},nextTourStep:()=>{let s=e().onboarding.tourStepIndex;a(a=>({onboarding:{...a.onboarding,tourStepIndex:s+1}}))},skipTour:()=>{a({onboarding:{tourStepIndex:-1,onboardingComplete:!0,activeTabOverride:void 0}}),e().addToast("You're all set! Feel free to explore.","success")},addRelease:async a=>{try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.musicApi.create(a)),await e().fetchReleases(),e().addToast("Wydanie zostało dodane!","success")}catch(a){var t,n;e().addToast("Błąd podczas dodawania wydania: "+((null==a||null==(n=a.response)||null==(t=n.data)?void 0:t.message)||a.message),"error")}},updateMusicSplits:async(a,t)=>{try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.musicApi.updateSplits(a,t)),await e().fetchReleases(),e().addToast("Podziały zostały zaktualizowane.","success")}catch(a){var n,i;e().addToast("Błąd podczas aktualizacji podział\xf3w: "+((null==a||null==(i=a.response)||null==(n=i.data)?void 0:n.message)||a.message),"error")}},fetchMusicTasks:async()=>{try{let e=await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(a=>a.tasksApi.getAll()),t=e.data.tasks||e.data;a(a=>({music:{...a.music,tasks:Array.isArray(t)?t:[]}}))}catch(a){var t,n;e().addToast("Błąd podczas pobierania zadań: "+((null==a||null==(n=a.response)||null==(t=n.data)?void 0:t.message)||a.message),"error")}},addMusicTask:async(a,t)=>{try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.tasksApi.create({text:a,dueDate:t})),await e().fetchMusicTasks(),e().addToast("Dodano zadanie muzyczne.","success")}catch(a){var n,i;e().addToast("Błąd podczas dodawania zadania: "+((null==a||null==(i=a.response)||null==(n=i.data)?void 0:n.message)||a.message),"error")}},toggleMusicTask:async(a,t)=>{try{if(void 0===t){let s=e().music.tasks.find(e=>e.id===a);t=!(null==s?void 0:s.completed)}await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.tasksApi.update(a,{completed:t})),await e().fetchMusicTasks(),e().addToast("Status zadania zaktualizowany.","success")}catch(a){var n,i;e().addToast("Błąd podczas zmiany statusu zadania: "+((null==a||null==(i=a.response)||null==(n=i.data)?void 0:n.message)||a.message),"error")}},fetchBooks:async()=>{try{let e=await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(a=>a.apiClient.get("/publishing/books")),t=e.data.books||e.data;a(a=>({publishing:{...a.publishing,books:Array.isArray(t)?t:[]}}))}catch(a){var t,n;e().addToast("Błąd podczas pobierania książek: "+((null==a||null==(n=a.response)||null==(t=n.data)?void 0:t.message)||a.message),"error")}},addBook:async a=>{var t,n,i,o;try{let i=await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.apiClient.post("/publishing/books",a));return await e().fetchBooks(),e().addToast("Dodano książkę.","success"),null==(n=i.data.book)||null==(t=n.id)?void 0:t.toString()}catch(a){e().addToast("Błąd podczas dodawania książki: "+((null==a||null==(o=a.response)||null==(i=o.data)?void 0:i.message)||a.message),"error");return}},updateBook:async(a,t)=>{try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.apiClient.patch("/publishing/books/".concat(a),t)),await e().fetchBooks(),e().addToast("Książka zaktualizowana.","success")}catch(a){var n,i;e().addToast("Błąd podczas aktualizacji książki: "+((null==a||null==(i=a.response)||null==(n=i.data)?void 0:n.message)||a.message),"error")}},updateBookSplits:async(a,t)=>{try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.apiClient.patch("/publishing/books/".concat(a,"/splits"),{splits:t})),await e().fetchBooks(),e().addToast("Splits updated successfully.","success")}catch(a){var n,i;e().addToast("Błąd podczas aktualizacji splits: "+((null==a||null==(i=a.response)||null==(n=i.data)?void 0:n.message)||a.message),"error")}},addChapter:s=>{let t=e().publishing.books.find(a=>a.id===s);if(!t)return;let n={title:"Chapter ".concat(t.chapters.length+1),content:""},i=[...t.chapters,n];a(a=>({publishing:{...a.publishing,books:a.publishing.books.map(a=>a.id===s?{...a,chapters:i}:a)}}))},updateChapterContent:async(a,t,n)=>{try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.apiClient.patch("/publishing/books/".concat(a,"/chapters/").concat(t),{content:n})),await e().fetchBooks(),e().addToast("Treść rozdziału zaktualizowana.","success")}catch(a){var i,o;e().addToast("Błąd podczas aktualizacji rozdziału: "+((null==a||null==(o=a.response)||null==(i=o.data)?void 0:i.message)||a.message),"error")}},replaceBookChapters:(e,s)=>{a(a=>({publishing:{...a.publishing,books:a.publishing.books.map(a=>a.id===e?{...a,chapters:s}:a)}}))},fetchPublishingTasks:async()=>{try{let e=await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(a=>a.apiClient.get("/publishing/tasks")),t=e.data.tasks||e.data;a(a=>({publishing:{...a.publishing,tasks:Array.isArray(t)?t:[]}}))}catch(a){var t,n;e().addToast("Błąd podczas pobierania zadań wydawniczych: "+((null==a||null==(n=a.response)||null==(t=n.data)?void 0:t.message)||a.message),"error")}},addPublishingTask:async(a,t)=>{try{await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.apiClient.post("/publishing/tasks",{text:a,dueDate:t})),await e().fetchPublishingTasks(),e().addToast("Dodano zadanie wydawnicze.","success")}catch(a){var n,i;e().addToast("Błąd podczas dodawania zadania wydawniczego: "+((null==a||null==(i=a.response)||null==(n=i.data)?void 0:n.message)||a.message),"error")}},togglePublishingTask:async(a,t)=>{try{if(void 0===t){let s=e().publishing.tasks.find(e=>e.id===a);t=!(null==s?void 0:s.completed)}await Promise.all([s.e(40),s.e(258)]).then(s.bind(s,2258)).then(e=>e.apiClient.patch("/publishing/tasks/".concat(a),{completed:t})),await e().fetchPublishingTasks(),e().addToast("Status zadania wydawniczego zaktualizowany.","success")}catch(a){var n,i;e().addToast("Błąd podczas zmiany statusu zadania wydawniczego: "+((null==a||null==(i=a.response)||null==(n=i.data)?void 0:n.message)||a.message),"error")}}}))},5712:(a,e,s)=>{a.exports=s(8214)},8214:(a,e,s)=>{var t=s(4232),n=s(8806),i="function"==typeof Object.is?Object.is:function(a,e){return a===e&&(0!==a||1/a==1/e)||a!=a&&e!=e},o=n.useSyncExternalStore,r=t.useRef,l=t.useEffect,d=t.useMemo,u=t.useDebugValue;e.useSyncExternalStoreWithSelector=function(a,e,s,t,n){var c=r(null);if(null===c.current){var p={hasValue:!1,value:null};c.current=p}else p=c.current;var h=o(a,(c=d(function(){function a(a){if(!l){if(l=!0,o=a,a=t(a),void 0!==n&&p.hasValue){var e=p.value;if(n(e,a))return r=e}return r=a}if(e=r,i(o,a))return e;var s=t(a);return void 0!==n&&n(e,s)?(o=a,e):(o=a,r=s)}var o,r,l=!1,d=void 0===s?null:s;return[function(){return a(e())},null===d?void 0:function(){return a(d())}]},[e,s,t,n]))[0],c[1]);return l(function(){p.hasValue=!0,p.value=h},[h]),u(h),h}},8806:(a,e,s)=>{a.exports=s(9429)},9429:(a,e,s)=>{var t=s(4232),n="function"==typeof Object.is?Object.is:function(a,e){return a===e&&(0!==a||1/a==1/e)||a!=a&&e!=e},i=t.useState,o=t.useEffect,r=t.useLayoutEffect,l=t.useDebugValue;function d(a){var e=a.getSnapshot;a=a.value;try{var s=e();return!n(a,s)}catch(a){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(a,e){return e()}:function(a,e){var s=e(),t=i({inst:{value:s,getSnapshot:e}}),n=t[0].inst,u=t[1];return r(function(){n.value=s,n.getSnapshot=e,d(n)&&u({inst:n})},[a,s,e]),o(function(){return d(n)&&u({inst:n}),a(function(){d(n)&&u({inst:n})})},[a]),l(s),s};e.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:u}}]);